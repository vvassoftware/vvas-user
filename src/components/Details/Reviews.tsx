import { useNavigate } from "react-router-dom";
import Review from "./Review";

interface ReviewsProps {
  schoolId: string;
  setShowModalReview: (value: boolean) => void;
  // eslint-disable-next-line
  allReviews: any;
}

export default function Reviews({
  schoolId,
  allReviews,
  setShowModalReview,
}: ReviewsProps) {
  const navigate = useNavigate();

  return (
    <div className="mt-7 px-5">
      <h3 className="text-[26px] font-bold text-darkBlue">Reviews</h3>
      <p className="text-darkBlue -mt-1">Leave a review</p>

      <button
        className="w-full grid place-items-center mt-5"
        onClick={() => setShowModalReview(true)}
      >
        <svg
          width="200"
          height="33"
          viewBox="0 0 277 33"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M15.0654 1.98114C15.5614 0.672955 17.4384 0.672955 17.9359 1.98114L21.1444 10.8687C21.3691 11.4577 21.9411 11.8498 22.5797 11.8498H30.4644C31.9214 11.8498 32.5569 13.6633 31.4114 14.5514L25.8005 19.5997C25.5492 19.7929 25.3655 20.0608 25.2758 20.3649C25.1862 20.669 25.1951 20.9936 25.3014 21.2923L27.3505 29.9768C27.8496 31.3718 26.2345 32.5699 25.0131 31.7112L17.3919 26.8753C17.1309 26.6919 16.8196 26.5935 16.5006 26.5935C16.1816 26.5935 15.8704 26.6919 15.6094 26.8753L7.98817 31.7112C6.76834 32.5699 5.15171 31.3702 5.65081 29.9768L7.69988 21.2923C7.80617 20.9936 7.81513 20.669 7.72546 20.3649C7.6358 20.0608 7.45212 19.7929 7.20078 19.5997L1.58987 14.5514C0.442884 13.6633 1.08147 11.8498 2.53535 11.8498H10.4201C10.7305 11.8509 11.034 11.7576 11.2903 11.5824C11.5466 11.4072 11.7436 11.1583 11.8554 10.8687L15.0638 1.98114H15.0654Z"
            stroke="#1B4965"
            strokeWidth="1.33333"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M76.0654 1.98114C76.5614 0.672955 78.4384 0.672955 78.9359 1.98114L82.1444 10.8687C82.3691 11.4577 82.9411 11.8498 83.5797 11.8498H91.4644C92.9214 11.8498 93.5569 13.6633 92.4114 14.5514L86.8005 19.5997C86.5492 19.7929 86.3655 20.0608 86.2758 20.3649C86.1862 20.669 86.1951 20.9936 86.3014 21.2923L88.3505 29.9768C88.8496 31.3718 87.2345 32.5699 86.0131 31.7112L78.3919 26.8753C78.1309 26.6919 77.8196 26.5935 77.5006 26.5935C77.1816 26.5935 76.8704 26.6919 76.6094 26.8753L68.9882 31.7112C67.7683 32.5699 66.1517 31.3702 66.6508 29.9768L68.6999 21.2923C68.8062 20.9936 68.8151 20.669 68.7255 20.3649C68.6358 20.0608 68.4521 19.7929 68.2008 19.5997L62.5899 14.5514C61.4429 13.6633 62.0815 11.8498 63.5354 11.8498H71.4201C71.7305 11.8509 72.034 11.7576 72.2903 11.5824C72.5466 11.4072 72.7436 11.1583 72.8554 10.8687L76.0638 1.98114H76.0654Z"
            stroke="#1B4965"
            strokeWidth="1.33333"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M137.065 1.98114C137.561 0.672955 139.438 0.672955 139.936 1.98114L143.144 10.8687C143.369 11.4577 143.941 11.8498 144.58 11.8498H152.464C153.921 11.8498 154.557 13.6633 153.411 14.5514L147.801 19.5997C147.549 19.7929 147.365 20.0608 147.276 20.3649C147.186 20.669 147.195 20.9936 147.301 21.2923L149.35 29.9768C149.85 31.3718 148.234 32.5699 147.013 31.7112L139.392 26.8753C139.131 26.6919 138.82 26.5935 138.501 26.5935C138.182 26.5935 137.87 26.6919 137.609 26.8753L129.988 31.7112C128.768 32.5699 127.152 31.3702 127.651 29.9768L129.7 21.2923C129.806 20.9936 129.815 20.669 129.725 20.3649C129.636 20.0608 129.452 19.7929 129.201 19.5997L123.59 14.5514C122.443 13.6633 123.081 11.8498 124.535 11.8498H132.42C132.731 11.8509 133.034 11.7576 133.29 11.5824C133.547 11.4072 133.744 11.1583 133.855 10.8687L137.064 1.98114H137.065Z"
            stroke="#1B4965"
            strokeWidth="1.33333"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M198.065 1.98114C198.561 0.672955 200.438 0.672955 200.936 1.98114L204.144 10.8687C204.369 11.4577 204.941 11.8498 205.58 11.8498H213.464C214.921 11.8498 215.557 13.6633 214.411 14.5514L208.801 19.5997C208.549 19.7929 208.365 20.0608 208.276 20.3649C208.186 20.669 208.195 20.9936 208.301 21.2923L210.35 29.9768C210.85 31.3718 209.234 32.5699 208.013 31.7112L200.392 26.8753C200.131 26.6919 199.82 26.5935 199.501 26.5935C199.182 26.5935 198.87 26.6919 198.609 26.8753L190.988 31.7112C189.768 32.5699 188.152 31.3702 188.651 29.9768L190.7 21.2923C190.806 20.9936 190.815 20.669 190.725 20.3649C190.636 20.0608 190.452 19.7929 190.201 19.5997L184.59 14.5514C183.443 13.6633 184.081 11.8498 185.535 11.8498H193.42C193.731 11.8509 194.034 11.7576 194.29 11.5824C194.547 11.4072 194.744 11.1583 194.855 10.8687L198.064 1.98114H198.065Z"
            stroke="#1B4965"
            strokeWidth="1.33333"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M259.065 1.98114C259.561 0.672955 261.438 0.672955 261.936 1.98114L265.144 10.8687C265.369 11.4577 265.941 11.8498 266.58 11.8498H274.464C275.921 11.8498 276.557 13.6633 275.411 14.5514L269.801 19.5997C269.549 19.7929 269.365 20.0608 269.276 20.3649C269.186 20.669 269.195 20.9936 269.301 21.2923L271.35 29.9768C271.85 31.3718 270.234 32.5699 269.013 31.7112L261.392 26.8753C261.131 26.6919 260.82 26.5935 260.501 26.5935C260.182 26.5935 259.87 26.6919 259.609 26.8753L251.988 31.7112C250.768 32.5699 249.152 31.3702 249.651 29.9768L251.7 21.2923C251.806 20.9936 251.815 20.669 251.725 20.3649C251.636 20.0608 251.452 19.7929 251.201 19.5997L245.59 14.5514C244.443 13.6633 245.081 11.8498 246.535 11.8498H254.42C254.731 11.8509 255.034 11.7576 255.29 11.5824C255.547 11.4072 255.744 11.1583 255.855 10.8687L259.064 1.98114H259.065Z"
            stroke="#1B4965"
            strokeWidth="1.33333"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
      </button>

      <div>
        {allReviews.isLoading ? (
          <div>loading..</div>
        ) : allReviews.isError ? (
          <div>something went wrong</div>
        ) : allReviews.data ? (
          allReviews.data
            .slice(0, 3)
            .map((review) => (
              <Review key={review.id} review={review} />
            ))
        ) : (
          <div>no reviews available</div>
        )}
      </div>

      <button
        className="text-white font-medium text-lg h-[50px] bg-darkBlue w-full rounded-md mt-5"
        onClick={() =>
          navigate("/reviews/all", {
            state: { schoolId: +schoolId! },
          })
        }
      >
        View all reviews
      </button>
    </div>
  );
}
